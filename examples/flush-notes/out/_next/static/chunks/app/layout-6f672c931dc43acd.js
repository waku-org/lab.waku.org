(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5856:function(){},2678:function(){},5819:function(){},4112:function(){},3517:function(t,i,e){Promise.resolve().then(e.bind(e,5685))},5685:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return h}});var n=e(7437),r=e(1654),s=e.n(r),a=e(2265),l=e(7441),u=e(1177),o=e(6309);let c=a.createContext({status:u.c.Initializing,waku:void 0}),d=t=>{let i=a.useRef(),[e,r]=a.useState(u.c.Initializing);return(a.useEffect(()=>{if(i.current)return;let t=t=>{r(t.detail)};return l.H5.addEventListener(l.J9.Status,t),l.H5.init().then(()=>{i.current=l.H5}),()=>{l.H5.removeEventListener(l.J9.Status,t)}},[i,r]),e===u.c.Failed)?(0,n.jsx)(n.Fragment,{children:e}):e!==u.c.Connected?(0,n.jsx)(o.g,{}):(0,n.jsx)(c.Provider,{value:{status:e,waku:i.current},children:t.children})};function h(t){let{children:i}=t;return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsx)("title",{children:"Share notes"}),(0,n.jsx)("body",{className:s().className,children:(0,n.jsx)(d,{children:i})})]})}e(2489)},6309:function(t,i,e){"use strict";e.d(i,{g:function(){return r}});var n=e(7437);let r=()=>(0,n.jsx)("div",{className:"loading-block",children:(0,n.jsx)("p",{children:"Loading..."})})},1177:function(t,i,e){"use strict";var n,r;e.d(i,{c:function(){return n},m:function(){return s}});let s="/flush-notes/1/note/proto";(r=n||(n={})).Initializing="Initializing...",r.WaitingForPeers="Waiting for peers...",r.Connected="Connected",r.Failed="Failed to initialize(see logs)"},7441:function(t,i,e){"use strict";e.d(i,{H5:function(){return l},J9:function(){return n}});var n,r=e(1177),s=e(5302);(n||(n={})).Status="status";class a{async init(){if(!this.initialized&&!this.initializing){this.initializing=!0;try{this.emitStatusEvent(r.c.Initializing);let t=await (0,s.pq)({defaultBootstrap:!0});await t.start(),this.emitStatusEvent(r.c.WaitingForPeers),await (0,s.gT)(t,[s.Uw.Filter,s.Uw.LightPush,s.Uw.Store]),this.node=t,this.initialized=!0,this.emitStatusEvent(r.c.Connected)}catch(t){console.error("Failed to initialize Waku node:",t),this.emitStatusEvent(r.c.Failed)}this.initializing=!1}}addEventListener(t,i){return this.emitter.addEventListener(t,i)}removeEventListener(t,i){return this.emitter.removeEventListener(t,i)}send(t,i){var e;return this.ensureWakuInitialized(),null===(e=this.node)||void 0===e?void 0:e.lightPush.send(t,i)}async getHistory(t){this.ensureWakuInitialized();let i=[];for await(let e of this.node.store.queryGenerator([t])){let t=await Promise.all(e),n=t.filter(t=>!!t);i=[...i,...n]}return i}async subscribe(t,i){return this.ensureWakuInitialized(),this.node.filter.subscribe(t,i)}emitStatusEvent(t){this.emitter.dispatchEvent(new CustomEvent("status",{detail:t}))}ensureWakuInitialized(){if(!l.initialized){let t="Waku is not initialized.";throw console.log(t),Error(t)}}constructor(){this.emitter=new EventTarget,this.initialized=!1,this.initializing=!1}}let l=new a},2489:function(){},1654:function(t){t.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(t){t.O(0,[324,971,472,744],function(){return t(t.s=3517)}),_N_E=t.O()}]);