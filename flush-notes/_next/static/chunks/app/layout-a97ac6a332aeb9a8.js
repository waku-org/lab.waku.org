(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5856:function(){},2678:function(){},5819:function(){},4112:function(){},8080:function(t,e,i){Promise.resolve().then(i.bind(i,5685))},5685:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var n=i(7437),s=i(1654),r=i.n(s),a=i(2265),u=i(7441),l=i(1177),c=i(6309);let o=a.createContext({status:l.c.Initializing,waku:void 0}),d=t=>{let e=a.useRef(),[i,s]=a.useState(l.c.Initializing);return(a.useEffect(()=>{if(e.current)return;let t=t=>{s(t.detail)};return u.H5.addEventListener(u.J9.Status,t),u.H5.init().then(()=>{e.current=u.H5}),()=>{u.H5.removeEventListener(u.J9.Status,t)}},[e,s]),i===l.c.Failed)?(0,n.jsx)(n.Fragment,{children:i}):i!==l.c.Connected?(0,n.jsx)(c.g,{}):(0,n.jsx)(o.Provider,{value:{status:i,waku:e.current},children:t.children})};function h(t){let{children:e}=t;return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsx)("title",{children:"Share notes"}),(0,n.jsx)("body",{className:r().className,children:(0,n.jsx)(d,{children:e})})]})}i(2489)},6309:function(t,e,i){"use strict";i.d(e,{g:function(){return s}});var n=i(7437);let s=()=>(0,n.jsx)("div",{className:"loading-block",children:(0,n.jsx)("p",{children:"Loading..."})})},1177:function(t,e,i){"use strict";var n,s;i.d(e,{c:function(){return n},m:function(){return r}});let r="/flush-notes/1/note/proto";(s=n||(n={})).Initializing="Initializing...",s.WaitingForPeers="Waiting for peers...",s.Connected="Connected",s.Failed="Failed to initialize(see logs)"},7441:function(t,e,i){"use strict";i.d(e,{H5:function(){return l},J9:function(){return n}});var n,s=i(1177),r=i(8089),a=i(9527);(n||(n={})).Status="status";class u{async init(){if(!this.initialized&&!this.initializing){this.initializing=!0;try{this.emitStatusEvent(s.c.Initializing),this.pubsubTopic=(0,a.L3)(s.m);let t=await (0,r.pq)({defaultBootstrap:!0,contentTopics:[s.m]});await t.start(),this.emitStatusEvent(s.c.WaitingForPeers),await (0,r.gT)(t,[r.Uw.Filter,r.Uw.LightPush,r.Uw.Store]),this.node=t,this.initialized=!0,this.emitStatusEvent(s.c.Connected)}catch(t){console.error("Failed to initialize Waku node:",t),this.emitStatusEvent(s.c.Failed)}this.initializing=!1}}addEventListener(t,e){return this.emitter.addEventListener(t,e)}removeEventListener(t,e){return this.emitter.removeEventListener(t,e)}send(t,e){var i;return this.ensureWakuInitialized(),null===(i=this.node)||void 0===i?void 0:i.lightPush.send(t,e)}async getHistory(t){this.ensureWakuInitialized();let e=[];for await(let i of this.node.store.queryGenerator([t])){let t=await Promise.all(i),n=t.filter(t=>!!t);e=[...e,...n]}return e}async subscribe(t,e){return this.ensureWakuInitialized(),this.node.filter.subscribe(t,e)}emitStatusEvent(t){this.emitter.dispatchEvent(new CustomEvent("status",{detail:t}))}ensureWakuInitialized(){if(!this.initialized){let t="Waku is not initialized.";throw console.log(t),Error(t)}}constructor(){this.emitter=new EventTarget,this.initialized=!1,this.initializing=!1}}let l=new u},2489:function(){},1654:function(t){t.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(t){t.O(0,[948,971,472,744],function(){return t(t.s=8080)}),_N_E=t.O()}]);