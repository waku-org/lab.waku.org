(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5856:function(){},2678:function(){},5819:function(){},4112:function(){},8080:function(t,i,e){Promise.resolve().then(e.bind(e,5685))},5685:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return h}});var n=e(7437),s=e(1654),r=e.n(s),a=e(2265),u=e(7441),l=e(1177),o=e(6309);let c=a.createContext({status:l.c.Initializing,waku:void 0}),d=t=>{let i=a.useRef(),[e,s]=a.useState(l.c.Initializing);return(a.useEffect(()=>{if(i.current)return;let t=t=>{s(t.detail)};return u.H5.addEventListener(u.J9.Status,t),u.H5.init().then(()=>{i.current=u.H5}),()=>{u.H5.removeEventListener(u.J9.Status,t)}},[i,s]),e===l.c.Failed)?(0,n.jsx)(n.Fragment,{children:e}):e!==l.c.Connected?(0,n.jsx)(o.g,{}):(0,n.jsx)(c.Provider,{value:{status:e,waku:i.current},children:t.children})};function h(t){let{children:i}=t;return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsx)("title",{children:"Share notes"}),(0,n.jsx)("body",{className:r().className,children:(0,n.jsx)(d,{children:i})})]})}e(2489)},6309:function(t,i,e){"use strict";e.d(i,{g:function(){return s}});var n=e(7437);let s=()=>(0,n.jsx)("div",{className:"loading-block",children:(0,n.jsx)("p",{children:"Loading..."})})},1177:function(t,i,e){"use strict";var n,s;e.d(i,{c:function(){return n},m:function(){return r}});let r="/flush-notes/1/note/proto";(s=n||(n={})).Initializing="Initializing...",s.WaitingForPeers="Waiting for peers...",s.Connected="Connected",s.Failed="Failed to initialize(see logs)"},7441:function(t,i,e){"use strict";e.d(i,{H5:function(){return l},J9:function(){return n}});var n,s=e(1177),r=e(8089),a=e(9527);(n||(n={})).Status="status";class u{async init(){if(!this.initialized&&!this.initializing){this.initializing=!0;try{this.emitStatusEvent(s.c.Initializing),this.pubsubTopic=(0,a.L3)(s.m);let t=await (0,r.pq)({defaultBootstrap:!0,contentTopics:[s.m]});await t.start(),this.emitStatusEvent(s.c.WaitingForPeers),await (0,r.gT)(t,[r.Uw.Filter,r.Uw.LightPush,r.Uw.Store]),this.node=t,this.initialized=!0,this.emitStatusEvent(s.c.Connected)}catch(t){console.error("Failed to initialize Waku node:",t),this.emitStatusEvent(s.c.Failed)}this.initializing=!1}}addEventListener(t,i){return this.emitter.addEventListener(t,i)}removeEventListener(t,i){return this.emitter.removeEventListener(t,i)}send(t,i){var e;return this.ensureWakuInitialized(),null===(e=this.node)||void 0===e?void 0:e.lightPush.send(t,i)}async getHistory(t){this.ensureWakuInitialized();let i=[];for await(let e of this.node.store.queryGenerator([t])){let t=await Promise.all(e),n=t.filter(t=>!!t);i=[...i,...n]}return i}async subscribe(t,i){return this.ensureWakuInitialized(),this.node.filter.subscribe(t,i)}emitStatusEvent(t){this.emitter.dispatchEvent(new CustomEvent("status",{detail:t}))}ensureWakuInitialized(){if(!l.initialized){let t="Waku is not initialized.";throw console.log(t),Error(t)}}constructor(){this.emitter=new EventTarget,this.initialized=!1,this.initializing=!1}}let l=new u},2489:function(){},1654:function(t){t.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(t){t.O(0,[948,971,472,744],function(){return t(t.s=8080)}),_N_E=t.O()}]);